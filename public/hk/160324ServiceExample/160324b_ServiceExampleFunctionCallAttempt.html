<!--http://localhost:3000\hk\160324ServiceExample\160324b_ServiceExampleFunctionCallAttempt.html-->
<!--from https://docs.angularjs.org/guide/services-->
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Example - example-example46-production</title>
		<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>
		<script type="text/javascript">
			if (false) // original
			{
				// CONTROLLER
				(function(angular) {
					'use strict';
					angular.module('myServiceModule', []).
					controller('MyController', ['$scope', 'notify', function ($scope, notify) {
						$scope.callNotify = function(msg) {
							notify(msg);
						};
					}]).factory('notify', ['$window', function(win) {
						var msgs = [];
						return function(msg) {
							msgs.push(msg);
							if (msgs.length == 3) {
								win.alert(msgs.join("\n"));
								msgs = [];
							}
						};
					}]);
				})(window.angular);

			} else {
				// CONTROLLER
				(function(angular) {
					'use strict';
					var y = null;
					angular.module('myServiceModule', []).
						controller('MyController', ['$scope', 'notify', function ($scope, notify) {
							$scope.callNotify = function(msg) {
								notify(msg);
							};
						}]);
					// SERVICE
					angular.module('myServiceModule').factory('notify', ['$window', function(win) {
							var msgs = [];

							return function(msg) {
								msgs.push(msg);
								if (msgs.length == 3) {
									win.alert(msgs.join("\n"));
									msgs = [];
								}
							};
						}]);
				})(window.angular);

			}
		</script>
	</head>

	<body ng-app="myServiceModule">
		<div id="simple" ng-controller="MyController">
			<input ng-init="message='test'" ng-model="message" >
			<button ng-click="callNotify(message);">NOTIFY</button> (click 3 times to see an alert)
		</div>
	</body>
</html>

<!--
	Copyright 2016 Google Inc. All Rights Reserved.
	Use of this source code is governed by an MIT-style license that
can be found in the LICENSE file at http://angular.io/license
	-->
